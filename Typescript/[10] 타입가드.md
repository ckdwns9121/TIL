# íƒ€ìž…ê°€ë“œ

## íƒ€ìž…ê°€ë“œëž€

- ì¡°ê±´ë¶€ ë¸”ë¡ ë‚´ì—ì„œ ê°ì²´ì˜ íƒ€ìž… ìœ í˜•ì„ ì¢í˜€ë‚˜ê°ˆ ìˆ˜ ìžˆëŠ” ê²ƒ.
- ì»´íŒŒì¼ëŸ¬ê°€ íƒ€ìž…ì„ ì˜ˆì¸¡í•  ìˆ˜ ìžˆë„ë¡ íƒ€ìž…ì„ ì¢í˜€ ì£¼ì–´ì„œ ì¢€ ë” `type safety`í•¨ì„ ë³´ìž¥í•  ìˆ˜ ìžˆë‹¤.

## ìžë°”ìŠ¤í¬ë¦½íŠ¸ ë¹ŒíŠ¸ì¸ íƒ€ìž…ê°€ë“œ

## ðŸ”´typeof

- typeof ì—°ì‚°ìžëŠ” í”¼ì—°ì‚°ìžì˜ íƒ€ìž…ì„ íŒë‹¨í•˜ì—¬ **ë¬¸ìžì—´ë¡œ ë°˜í™˜** í•´ì¤€ë‹¤.

```ts
function testFunc(arg: string | number) {
  arg.substring(3); // ts(2339) : Property 'substring' does not exist on type 'string | number'.

  if (typeof arg === 'string') {
    // ì—¬ê¸° ë°‘ì—ì„œ ì‚¬ìš©í•˜ëŠ” argëŠ” ë°˜ë“œì‹œ string typeìœ¼ë¡œ ì¸ì‹í•©ë‹ˆë‹¤.
    arg.substring(3);
  }
}
```

ìœ„ ìƒí™©ì—ì„œ íƒ€ìž… ì²´í¬ë¥¼ í•˜ì§€ì•Šê³  String.prototype.substring() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ë²„ë¦¬ë©´ `number`ì¼ ë•Œ ì¡´ìž¬í•˜ì§€ ì•ŠëŠ” ë©”ì„œë“œë¼ëŠ” ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.

ê·¸ ë°‘ì— ifë¬¸ ë‚´ì—ì„œëŠ” argê°€ `ë¬´ì¡°ê±´ string type`ìž„ì„ ë³´ìž¥í•˜ê²Œ ëœë‹¤.

## ðŸ”´instanceof

- instanceof ì—°ì‚°ìžëŠ” íŒë³„í•  ê°ì²´ê°€ íŠ¹ì •í•œ `í´ëž˜ìŠ¤`ì— ì†í•˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìžˆë‹¤.

```ts
class Student {
  name: string;
  age: number;
}
class School {
  location: string;
}

function testFunc(arg: Student | School) {
  if (arg instanceof Student) {
    console.log(arg.name); // OK
    console.log(arg.location); // ts(2339) : Property 'location' does not exist on type 'Student'.
  } else {
    // ì—¬ê¸°ì„œë¶€í„°ëŠ” argê°€ ë°˜ë“œì‹œ School íƒ€ìž…ìœ¼ë¡œ ì¸ì‹í•©ë‹ˆë‹¤.
    console.log(arg.location); // OK
  }
}
const student = new Student();
testFunc(student);
```

## ðŸ”´in

- `ë¬¸ìžì—´ A in Object` : objectì˜ keyì¤‘ì— ë¬¸ìžì—´ Aê°€ ì¡´ìž¬í•˜ëŠ”ì§€ í™•ì¸í•¨

```ts
type Human = {
  think: () => void;
};

type Dog = {
  tail: string;
  bark: () => void;
};

declare function getEliceType(): Human | Dog;

const elice = getEliceType();

if ('tail' in elice) {
  elice.bark();
} else {
  elice.think();
}
```

## ì‚¬ìš©ìž ì •ì˜ íƒ€ìž…ê°€ë“œ

ì•„ëž˜ì™€ ê°™ì´ `Animal`, `Flower` ì¸í„°íŽ˜ì´ìŠ¤ë¥¼ ì •ì˜í–ˆë‹¤ê³  ê°€ì •í•´ë³´ìž.

Animalì—ë§Œ name í”„ë¡œí¼í‹°ê°€ ì¡´ìž¬í•˜ê³  Flower ì—ë§Œ type í”„ë¡œí¼í‹°ê°€ ì¡´ìž¬í•œë‹¤.

```ts
interface Animal {
  name: string;
  age: number;
}

interface Flower {
  type: string;
  age: number;
}

interface ExampleInfo {
  page: number;
  infoBody: Animal | Flower;
}

// User Defined Type Guards Function
// ì¸ìžë¡œ ë„˜ì–´ì˜¨ ê°’ì— name í”„ë¡œí¼í‹°ê°€ ìžˆë‹¤ë©´ argì˜ íƒ€ìž…ì„ Animalë¡œ ì¸ì‹í•˜ê²Œ í•œë‹¤.
function isAnimal(arg: any): arg is Animal {
  return arg.name !== undefined;
  // return 'name' in arg; ë¼ê³  í‘œí˜„í•´ë„ ë™ì¼í•©ë‹ˆë‹¤.
}

function doSomething(arg: ExampleInfo) {
  const { page, infoBody } = arg;

  if (isAnimal(infoBody)) {
    // ì´ ifë¬¸ ì•ˆì—ì„œ infoBodyì˜ íƒ€ìž…ì€ ë°˜ë“œì‹œ Animal ì¸í„°íŽ˜ì´ìŠ¤ì´ë‹¤.
    console.log(infoBody.name);
  } else {
    // ì´ ifë¬¸ ì•ˆì—ì„œ infoBodyì˜ íƒ€ìž…ì€ ë°˜ë“œì‹œ Flower ì¸í„°íŽ˜ì´ìŠ¤ì´ë‹¤.
    console.log(infoBody.type); // OK
    console.log(infoBody.name); // error
  }
}

const puppy: Animal = {
  name: 'puppy',
  age: 5,
};
const animalInfo: ExampleInfo = {
  page: 10,
  infoBody: puppy,
};
doSomething(animalInfo);
```

ìœ„ì™€ ê°™ì€ ìƒí™©ì€ **íŠ¹ì • í”„ë¡œí¼í‹°ì˜ ì¡´ìž¬ ìœ ë¬´**ì— ë”°ë¼ íƒ€ìž…ê°€ë“œë¥¼ í•œ ìƒí™©ì´ë‹¤.  
ì¦‰ isAnimal í•¨ìˆ˜ëŠ” nameì´ë¼ëŠ” í”„ë¡œí¼í‹°ì˜ ì¡´ìž¬ ìœ ë¬´ì— ë”°ë¼ ì´ ê°ì²´ íƒ€ìž…ì´ Animalì¸ì§€ íŒë‹¨í•œë‹¤.

### ë¦¬í„°ëŸ´ íƒ€ìž…ê°€ë“œ

- ë¦¬í„°ëŸ´ íƒ€ìž…ì€ `if`ë¬¸ì´ë‚˜ `switch`ë¬¸ìœ¼ë¡œ íƒ€ìž…ê°€ë“œ ê°€ëŠ¥

```ts
type Action = 'click' | 'hover' | 'scroll';

const doPhotoAction = (action: Action) => {
  switch (action) {
    case 'click':
      showPhoto();
      break;
    case 'hover':
      zoomInPhoto();
      break;
    case 'scroll':
      loadPhotoMore();
      break;
  }
};

// or

const doPhotoAction2 = (action: Action) => {
  if (action === 'click') {
    showPhoto();
  } else if (action === 'hover') {
    zoomInPhoto();
  } else if (action === 'scroll') {
    loadPhotoMore();
  }
};
```
